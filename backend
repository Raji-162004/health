from google.colab import output
from IPython.display import display, HTML

def process_symptoms(symptoms):
    symptoms = symptoms.lower()
    response = "Sorry, I couldn't understand your symptoms clearly. Please consult a healthcare professional for a proper diagnosis."

    if "fever" in symptoms:
        if "cough" in symptoms or "cold" in symptoms or "sore throat" in symptoms:
            response = (
                "ğŸ¦  You might have a viral infection or common cold.\n"
                "ğŸ¡ Home Remedies: Rest, stay hydrated, drink warm fluids like herbal tea, use a humidifier.\n"
                "ğŸ’Š Allopathic Medicines (consult a doctor first): Paracetamol (acetaminophen) for fever and pain, cough syrups like dextromethorphan."
            )
        elif "rash" in symptoms:
            response = (
                "ğŸ¦  Fever with rash could indicate infections like measles or dengue. See a doctor urgently.\n"
                "ğŸ¡ Home Remedies: Avoid scratching, stay hydrated.\n"
                "ğŸ’Š Allopathic Medicines: None - requires urgent medical evaluation."
            )
        elif "headache" in symptoms and "body ache" in symptoms:
            response = (
                "ğŸ¦  Fever with headache and body ache could be flu or dengue fever.\n"
                "ğŸ¡ Home Remedies: Rest, drink fluids.\n"
                "ğŸ’Š Allopathic Medicines: Paracetamol for fever and pain relief. Avoid NSAIDs in dengue without doctor advice."
            )
        else:
            response = (
                "ğŸ¦  Fever detected.\n"
                "ğŸ¡ Home Remedies: Stay hydrated, rest, use cool compress.\n"
                "ğŸ’Š Allopathic Medicines: Paracetamol for fever."
            )

    elif "cough" in symptoms:
        if "shortness of breath" in symptoms or "chest pain" in symptoms:
            response = (
                "âš ï¸ These symptoms might indicate pneumonia or serious lung conditions.\n"
                "ğŸ¡ Home Remedies: None - seek immediate medical care.\n"
                "ğŸ’Š Allopathic Medicines: To be prescribed by a doctor (may include antibiotics or inhalers)."
            )
        elif "sore throat" in symptoms:
            response = (
                "ğŸ¤§ Possible throat infection or common cold.\n"
                "ğŸ¡ Home Remedies: Gargle warm salt water, drink warm fluids.\n"
                "ğŸ’Š Allopathic Medicines: Throat lozenges, acetaminophen or ibuprofen for pain."
            )
        else:
            response = (
                "ğŸ¤§ Cough detected.\n"
                "ğŸ¡ Home Remedies: Stay hydrated, use honey with warm water, rest.\n"
                "ğŸ’Š Allopathic Medicines: Cough syrups (e.g., dextromethorphan) or expectorants."
            )

    elif "headache" in symptoms:
        if "nausea" in symptoms or "vomiting" in symptoms:
            response = (
                "ğŸ¤• Possible migraine or serious conditions.\n"
                "ğŸ¡ Home Remedies: Rest in a dark room, cold compress.\n"
                "ğŸ’Š Allopathic Medicines: Migraine-specific meds (e.g., triptans), acetaminophen or NSAIDs."
            )
        elif "vision changes" in symptoms:
            response = (
                "âš ï¸ Headache with vision changes can be serious.\n"
                "ğŸ¡ Home Remedies: None - seek immediate medical attention.\n"
                "ğŸ’Š Allopathic Medicines: To be evaluated by a doctor."
            )
        else:
            response = (
                "ğŸ¤• Headache noted.\n"
                "ğŸ¡ Home Remedies: Hydrate, rest, avoid screens.\n"
                "ğŸ’Š Allopathic Medicines: Acetaminophen or NSAIDs."
            )

    elif "stomach pain" in symptoms or "abdominal pain" in symptoms:
        if "diarrhea" in symptoms or "vomiting" in symptoms:
            response = (
                "ğŸ² Possible stomach infection or food poisoning.\n"
                "ğŸ¡ Home Remedies: Drink ORS, eat bland foods.\n"
                "ğŸ’Š Allopathic Medicines: Oral rehydration salts, antiemetics (like ondansetron), and antibiotics if prescribed."
            )
        elif "constipation" in symptoms:
            response = (
                "ğŸ² Constipation detected.\n"
                "ğŸ¡ Home Remedies: Increase fiber, drink water.\n"
                "ğŸ’Š Allopathic Medicines: Laxatives like polyethylene glycol."
            )
        else:
            response = (
                "ğŸ² Abdominal discomfort noted.\n"
                "ğŸ¡ Home Remedies: Warm compress, avoid heavy meals.\n"
                "ğŸ’Š Allopathic Medicines: Antacids or pain relievers as advised."
            )

    elif "diarrhea" in symptoms:
        response = (
            "ğŸ² Diarrhea can cause dehydration.\n"
            "ğŸ¡ Home Remedies: Drink ORS, avoid caffeine and dairy.\n"
            "ğŸ’Š Allopathic Medicines: Oral rehydration salts, anti-diarrheal meds like loperamide (use cautiously)."
        )

    elif "fatigue" in symptoms or "tired" in symptoms or "weakness" in symptoms:
        response = (
            "ğŸ’¤ Fatigue can have many causes.\n"
            "ğŸ¡ Home Remedies: Sleep well, eat balanced diet, hydrate.\n"
            "ğŸ’Š Allopathic Medicines: Depends on cause; supplements like iron or vitamins if prescribed."
        )

    elif "chest pain" in symptoms:
        response = (
            "âš ï¸ Chest pain can indicate cardiac issues.\n"
            "ğŸ¡ Home Remedies: None - seek emergency care immediately.\n"
            "ğŸ’Š Allopathic Medicines: Emergency treatment only."
        )

    elif "rash" in symptoms or "itching" in symptoms:
        response = (
            "ğŸ©¹ Skin rash or itching.\n"
            "ğŸ¡ Home Remedies: Cool compress, avoid scratching.\n"
            "ğŸ’Š Allopathic Medicines: Antihistamines, topical corticosteroids."
        )

    elif "anxiety" in symptoms or "depression" in symptoms or "stress" in symptoms:
        response = (
            "ğŸ§  Mental health symptoms.\n"
            "ğŸ¡ Home Remedies: Relaxation techniques, meditation.\n"
            "ğŸ’Š Allopathic Medicines: Antidepressants or anxiolytics prescribed by psychiatrist."
        )

    elif "dizziness" in symptoms or "lightheaded" in symptoms:
        response = (
            "âš ï¸ Dizziness.\n"
            "ğŸ¡ Home Remedies: Hydrate, avoid sudden movements.\n"
            "ğŸ’Š Allopathic Medicines: Depends on cause; consult doctor."
        )

    elif "joint pain" in symptoms or "body ache" in symptoms:
        response = (
            "ğŸ¦´ Joint or body pain.\n"
            "ğŸ¡ Home Remedies: Warm compress, gentle stretches.\n"
            "ğŸ’Š Allopathic Medicines: NSAIDs like ibuprofen or naproxen."
        )

    else:
        response = "Sorry, your symptoms are unclear. Please consult a healthcare professional for accurate diagnosis."

    # Update UI
    js = f"""
    document.getElementById("responseText").innerText = `{response}`;
    """
    display(HTML(f"<script>{js}</script>"))

output.register_callback('notebook.process_symptoms', process_symptoms)
